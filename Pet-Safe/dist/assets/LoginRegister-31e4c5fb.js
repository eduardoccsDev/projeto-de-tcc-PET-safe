import{_ as q,r as _,o as n,c as d,a,w as t,b,t as g,d as h,e as y,f as k,g as S,h as I,v as i,i as x,p as C,j as R,k as U}from"./index-56c35e7b.js";const p=u=>(C("data-v-d507b49a"),u=u(),R(),u),D={class:"forms"},T={key:0,class:"forms__login"},N=k('<div class="forms__header" data-v-d507b49a><img src="'+S+'" alt="logo-pet-safe" class="forms__headerImg" data-v-d507b49a><p class="forms__headerTittle" data-v-d507b49a><i class="fa-solid fa-right-to-bracket" data-v-d507b49a></i> LOGIN </p><p class="forms__headerDescription" data-v-d507b49a> Preencha os campos abaixo para efetuar o login. </p></div>',1),L=["onSubmit"],P=p(()=>a("button",{type:"submit",class:"submitform"},"Entrar",-1)),j={key:0,class:"error"},B={key:1,class:"forms__register"},F=k('<div class="forms__header" data-v-d507b49a><img src="'+S+'" alt="logo-pet-safe" class="forms__headerImg" data-v-d507b49a><p class="forms__headerTittle" data-v-d507b49a><i class="fa-solid fa-user-plus" data-v-d507b49a></i> REGISTRO</p><p class="forms__headerDescription" data-v-d507b49a> Preencha os campos abaixo para efetuar o registro. </p></div>',1),O=["onSubmit"],A=p(()=>a("option",{value:"",disabled:""},"Selecione o tipo de residência",-1)),M=p(()=>a("option",{value:"Casa"},"Casa",-1)),G=p(()=>a("option",{value:"Apartamento"},"Apartamento",-1)),J=[A,M,G],z=p(()=>a("button",{type:"submit",class:"submitform"},"Registrar",-1)),$={key:0,class:"error"},H={key:1,class:"success"},K={__name:"LoginRegisterForm",emits:["user-logged-in"],setup(u,{emit:v}){const l=_(null),c=_(null),m=_(null),f=_(!1),e={nomeuser:"",emailuser:"",passworduser:"",passworduserrepeat:"",addressuser:"",residenciauser:"",cepuser:""};function w(){f.value=!f.value}const V=async()=>{l.value=null,c.value=null;try{if(!e.nomeuser||!e.emailuser||!e.passworduser||!e.addressuser||!e.passworduserrepeat||!e.residenciauser||!e.cepuser)throw new Error("Por favor, preencha todos os campos.");if(e.passworduser!==e.passworduserrepeat)throw new Error("As senhas não coincidem.");const o=await fetch("https://prickly-robe-eel.cyclic.cloud/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(o.ok)c.value="Usuário criado com sucesso!",setTimeout(window.location.reload(),5e3);else if(o.status===400){const s=await o.json();if(s.error==="Email já cadastrado")l.value=s.error;else throw new Error("Erro ao registrar. Verifique os dados inseridos.")}else throw new Error("Erro ao registrar. Verifique os dados inseridos.")}catch(o){console.log(o.message),l.value=o.message}},E=async()=>{m.value=null;try{if(!e.emailuser||!e.passworduser)throw new Error("Por favor, preencha todos os campos.");const o=await I.post("https://prickly-robe-eel.cyclic.cloud/login",e);if(!o.data.token)throw new Error("Erro ao fazer login. Verifique os dados inseridos.");localStorage.setItem("token",o.data.token),v("user-logged-in"),window.location.href="/"}catch(o){m.value=o.response.data.error}};return(o,s)=>(n(),d("section",D,[f.value?(n(),d("div",B,[F,a("form",{onSubmit:b(V,["prevent"]),class:"register"},[t(a("input",{"onUpdate:modelValue":s[2]||(s[2]=r=>e.nomeuser=r),required:"",type:"text",name:"nomeuser",class:"nomeuser",placeholder:"Insira seu nome"},null,512),[[i,e.nomeuser]]),t(a("input",{"onUpdate:modelValue":s[3]||(s[3]=r=>e.emailuser=r),required:"",type:"email",name:"emailuser",class:"emailuser",placeholder:"Insira seu e-mail"},null,512),[[i,e.emailuser]]),t(a("input",{"onUpdate:modelValue":s[4]||(s[4]=r=>e.passworduser=r),minlength:"8",required:"",type:"password",name:"passworduser",class:"passworduser",placeholder:"Insira sua senha"},null,512),[[i,e.passworduser]]),t(a("input",{"onUpdate:modelValue":s[5]||(s[5]=r=>e.passworduserrepeat=r),minlength:"8",required:"",type:"password",name:"passworduserrepeat",class:"passworduser",placeholder:"Repita sua senha"},null,512),[[i,e.passworduserrepeat]]),t(a("input",{"onUpdate:modelValue":s[6]||(s[6]=r=>e.addressuser=r),required:"",type:"text",name:"addressuser",class:"addressuser",placeholder:"Digite seu endereço"},null,512),[[i,e.addressuser]]),t(a("input",{"onUpdate:modelValue":s[7]||(s[7]=r=>e.cepuser=r),required:"",type:"number",name:"cepuser",class:"cepuser",placeholder:"Digite seu cep"},null,512),[[i,e.cepuser]]),t(a("select",{required:"","onUpdate:modelValue":s[8]||(s[8]=r=>e.residenciauser=r),name:"residenciauser",id:"residenciauser"},J,512),[[x,e.residenciauser]]),z],40,O),l.value?(n(),d("p",$,g(l.value),1)):h("",!0),c.value?(n(),d("p",H,g(c.value),1)):h("",!0),a("p",{class:"forms__ask"},[y(" Já possui uma conta? faça login "),a("button",{onClick:w},"Clicando aqui")])])):(n(),d("div",T,[N,a("form",{onSubmit:b(E,["prevent"]),class:"login"},[t(a("input",{required:"","onUpdate:modelValue":s[0]||(s[0]=r=>e.emailuser=r),type:"email",name:"emailuser",class:"emailuser",placeholder:"Insira seu e-mail"},null,512),[[i,e.emailuser]]),t(a("input",{required:"","onUpdate:modelValue":s[1]||(s[1]=r=>e.passworduser=r),type:"password",name:"passworduser",class:"passworduser",placeholder:"Insira sua senha"},null,512),[[i,e.passworduser]]),P],40,L),m.value?(n(),d("p",j,g(m.value),1)):h("",!0),a("p",{class:"forms__ask"},[y(" Não possui uma conta? Crie uma "),a("button",{onClick:w},"Clicando aqui")])]))]))}},Q=q(K,[["__scopeId","data-v-d507b49a"]]),X={__name:"LoginRegister",setup(u){return(v,l)=>(n(),U(Q))}};export{X as default};
