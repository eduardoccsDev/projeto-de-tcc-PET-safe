import{_ as U,r as u,h as _,o as l,c as r,a as e,F as V,q as C,e as p,t as f,w as n,v as h,i as A,d as I,p as S,j as w}from"./index-e7b566dc.js";const a=c=>(S("data-v-9a9ceb6c"),c=c(),w(),c),D={class:"container"},q=a(()=>e("section",{class:"page__title"},[e("h1",null,"Usuários cadastrados")],-1)),P=a(()=>e("hr",null,null,-1)),$={class:"page__content"},z={class:"accordion",id:"accordionExample"},B=["id"],N=["data-bs-target","aria-controls"],F=a(()=>e("i",{class:"fa-solid fa-user"},null,-1)),M=["id","aria-labelledby"],R={class:"accordion-body"},T=a(()=>e("label",{for:"nomeuser"},"Nome:",-1)),j=["disabled","onUpdate:modelValue"],L=a(()=>e("label",{for:"emailuser"},"E-mail:",-1)),G=["disabled","onUpdate:modelValue"],H=a(()=>e("label",{for:"addressuser"},"Endereço:",-1)),J=["disabled","onUpdate:modelValue"],K=a(()=>e("label",{for:"cepuser"},"CEP:",-1)),O=["disabled","onUpdate:modelValue"],Q=a(()=>e("label",{for:"residenciauser"},"Residência:",-1)),W=["disabled","onUpdate:modelValue"],X=a(()=>e("option",{selected:"",disabled:"",value:""},"Selecione o tipo de residência",-1)),Y=a(()=>e("option",{value:"Casa"},"Casa",-1)),Z=a(()=>e("option",{value:"Apartamento"},"Apartamento",-1)),ee=[X,Y,Z],oe={class:"btnContainer"},se=a(()=>e("i",{class:"fa-solid fa-pen-to-square"},null,-1)),ae=["onClick"],te=a(()=>e("i",{class:"fa-solid fa-floppy-disk"},null,-1)),de=["onClick"],ie=a(()=>e("i",{class:"fa-solid fa-trash"},null,-1)),le={__name:"AdminPage",setup(c){const y=u({}),m=u(null),b=u(null),d=u(!1),v=localStorage.getItem("token");v&&_.get("https://prickly-robe-eel.cyclic.cloud/protegido",{headers:{Authorization:`Bearer ${v}`}}).then(s=>{b.value=s.data.user}).catch(s=>{console.error("Erro ao acessar o endpoint protegido:",s)});const g=async()=>{try{const s=await _.get("https://prickly-robe-eel.cyclic.cloud/users");m.value=s.data,m.value.forEach(i=>{y.value[i.idusers]={...i}})}catch(s){console.error("Erro na solicitação Axios:",s)}};function E(){d.value=!d.value}const k=async s=>{try{(await _.delete(`https://prickly-robe-eel.cyclic.cloud/remover-user/${s.idusers}`)).status===200?window.location.reload():console.error("Erro ao remover a conta do usuário")}catch(i){console.error("Erro ao remover a conta do usuário:",i)}},x=async s=>{if(d.value){const i={nomeuser:s.nomeuser,emailuser:s.emailuser,addressuser:s.addressuser,residenciauser:s.residenciauser,cepuser:s.cepuser};try{(await _.post(`https://prickly-robe-eel.cyclic.cloud/atualizar-usuario/${s.idusers}`,i)).status===200?d.value=!1:console.error("Erro ao atualizar as informações do usuário")}catch(o){console.error("Erro ao atualizar as informações do usuário:",o)}}};return g(),(s,i)=>(l(),r("div",D,[q,P,e("section",$,[e("div",z,[(l(!0),r(V,null,C(m.value,o=>(l(),r("div",{class:"accordion-item",key:o.idusers},[e("h2",{class:"accordion-header",id:o.idusers},[e("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#id-"+o.idusers,"aria-expanded":"false","aria-controls":"id-"+o.idusers},[F,p(" "+f(o.nomeuser),1)],8,N)],8,B),e("div",{id:"id-"+o.idusers,class:"accordion-collapse collapse","aria-labelledby":o.idusers,"data-bs-parent":"#accordionExample"},[e("div",R,[e("p",null,"Id: "+f(o.idusers),1),T,n(e("input",{id:"nomeuser",disabled:!d.value,type:"text","onUpdate:modelValue":t=>o.nomeuser=t,placeholder:"Digite o nome do usuário",required:""},null,8,j),[[h,o.nomeuser]]),L,n(e("input",{id:"emailuser",disabled:!d.value,type:"email","onUpdate:modelValue":t=>o.emailuser=t,placeholder:"Digite o e-mail do usuário",required:""},null,8,G),[[h,o.emailuser]]),H,n(e("input",{id:"addressuser",disabled:!d.value,type:"text","onUpdate:modelValue":t=>o.addressuser=t,placeholder:"Digite o endereço do usuário",required:""},null,8,J),[[h,o.addressuser]]),K,n(e("input",{id:"cepuser",disabled:!d.value,type:"number","onUpdate:modelValue":t=>o.cepuser=t,placeholder:"Digite o CEP do usuário",required:""},null,8,O),[[h,o.cepuser]]),Q,n(e("select",{disabled:!d.value,"onUpdate:modelValue":t=>o.residenciauser=t},ee,8,W),[[A,o.residenciauser]]),e("div",oe,[d.value?(l(),r("button",{key:1,onClick:t=>x(o),class:"btn__save"},[te,p(" Salvar ")],8,ae)):(l(),r("button",{key:0,onClick:E,class:"btn__edit"},[se,p(" Editar ")])),o.nomeuser!=="Admin Pet Safe"&&b.value&&b.value.emailuser!=="admin@petsafe.com"?(l(),r("button",{key:2,onClick:t=>k(o),class:"btn__delete"},[ie,p(" Excluir ")],8,de)):I("",!0)])])],8,M)]))),128))])])]))}},ne=U(le,[["__scopeId","data-v-9a9ceb6c"]]);export{ne as default};
