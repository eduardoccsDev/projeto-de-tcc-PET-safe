import{_ as q,r as _,o as l,c as d,a as r,w as t,b as y,t as g,d as h,e as k,f as b,g as S,h as I,v as i,i as x,p as C,j as R,k as U}from"./index-eb53ba58.js";const p=u=>(C("data-v-56ee54a9"),u=u(),R(),u),D={class:"forms"},L={key:0,class:"forms__login"},T=b('<div class="forms__header" data-v-56ee54a9><img src="'+S+'" alt="logo-pet-safe" class="forms__headerImg" data-v-56ee54a9><p class="forms__headerTittle" data-v-56ee54a9><i class="fa-solid fa-right-to-bracket" data-v-56ee54a9></i> LOGIN </p><p class="forms__headerDescription" data-v-56ee54a9> Lorem ipsum dolor, lorem ipsum dolor lorem ipsim dolor. </p></div>',1),N=["onSubmit"],j=p(()=>r("button",{type:"submit",class:"submitform"},"Entrar",-1)),B={key:0,class:"error"},F={key:1,class:"forms__register"},O=b('<div class="forms__header" data-v-56ee54a9><img src="'+S+'" alt="logo-pet-safe" class="forms__headerImg" data-v-56ee54a9><p class="forms__headerTittle" data-v-56ee54a9><i class="fa-solid fa-user-plus" data-v-56ee54a9></i> REGISTRO</p><p class="forms__headerDescription" data-v-56ee54a9> Lorem ipsum dolor, lorem ipsum dolor lorem ipsim dolor. </p></div>',1),A=["onSubmit"],M=p(()=>r("option",{value:"",disabled:""},"Selecione o tipo de residência",-1)),P=p(()=>r("option",{value:"Casa"},"Casa",-1)),G=p(()=>r("option",{value:"Apartamento"},"Apartamento",-1)),J=[M,P,G],z=p(()=>r("button",{type:"submit",class:"submitform"},"Registrar",-1)),$={key:0,class:"error"},H={key:1,class:"success"},K={__name:"LoginRegisterForm",emits:["user-logged-in"],setup(u,{emit:v}){const n=_(null),c=_(null),m=_(null),f=_(!1),e={nomeuser:"",emailuser:"",passworduser:"",passworduserrepeat:"",addressuser:"",residenciauser:"",cepuser:""};function w(){f.value=!f.value}const V=async()=>{n.value=null,c.value=null;try{if(!e.nomeuser||!e.emailuser||!e.passworduser||!e.addressuser||!e.passworduserrepeat||!e.residenciauser||!e.cepuser)throw new Error("Por favor, preencha todos os campos.");if(e.passworduser!==e.passworduserrepeat)throw new Error("As senhas não coincidem.");const a=await fetch("https://prickly-robe-eel.cyclic.cloud/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(a.ok)c.value="Usuário criado com sucesso!",setTimeout(window.location.reload(),5e3);else if(a.status===400){const s=await a.json();if(s.error==="Email já cadastrado")n.value=s.error;else throw new Error("Erro ao registrar. Verifique os dados inseridos.")}else throw new Error("Erro ao registrar. Verifique os dados inseridos.")}catch(a){console.log(a.message),n.value=a.message}},E=async()=>{m.value=null;try{if(!e.emailuser||!e.passworduser)throw new Error("Por favor, preencha todos os campos.");const a=await I.post("https://prickly-robe-eel.cyclic.cloud/login",e);if(!a.data.token)throw new Error("Erro ao fazer login. Verifique os dados inseridos.");localStorage.setItem("token",a.data.token),v("user-logged-in"),window.location.href="/"}catch(a){m.value=a.response.data.error}};return(a,s)=>(l(),d("section",D,[f.value?(l(),d("div",F,[O,r("form",{onSubmit:y(V,["prevent"]),class:"register"},[t(r("input",{"onUpdate:modelValue":s[2]||(s[2]=o=>e.nomeuser=o),required:"",type:"text",name:"nomeuser",class:"nomeuser",placeholder:"Insira seu nome"},null,512),[[i,e.nomeuser]]),t(r("input",{"onUpdate:modelValue":s[3]||(s[3]=o=>e.emailuser=o),required:"",type:"email",name:"emailuser",class:"emailuser",placeholder:"Insira seu e-mail"},null,512),[[i,e.emailuser]]),t(r("input",{"onUpdate:modelValue":s[4]||(s[4]=o=>e.passworduser=o),minlength:"8",required:"",type:"password",name:"passworduser",class:"passworduser",placeholder:"Insira sua senha"},null,512),[[i,e.passworduser]]),t(r("input",{"onUpdate:modelValue":s[5]||(s[5]=o=>e.passworduserrepeat=o),minlength:"8",required:"",type:"password",name:"passworduserrepeat",class:"passworduser",placeholder:"Repita sua senha"},null,512),[[i,e.passworduserrepeat]]),t(r("input",{"onUpdate:modelValue":s[6]||(s[6]=o=>e.addressuser=o),required:"",type:"text",name:"addressuser",class:"addressuser",placeholder:"Digite seu endereço"},null,512),[[i,e.addressuser]]),t(r("input",{"onUpdate:modelValue":s[7]||(s[7]=o=>e.cepuser=o),required:"",type:"number",name:"cepuser",class:"cepuser",placeholder:"Digite seu cep"},null,512),[[i,e.cepuser]]),t(r("select",{required:"","onUpdate:modelValue":s[8]||(s[8]=o=>e.residenciauser=o),name:"residenciauser",id:"residenciauser"},J,512),[[x,e.residenciauser]]),z],40,A),n.value?(l(),d("p",$,g(n.value),1)):h("",!0),c.value?(l(),d("p",H,g(c.value),1)):h("",!0),r("p",{class:"forms__ask"},[k(" Já possui uma conta? faça login "),r("button",{onClick:w},"Clicando aqui")])])):(l(),d("div",L,[T,r("form",{onSubmit:y(E,["prevent"]),class:"login"},[t(r("input",{required:"","onUpdate:modelValue":s[0]||(s[0]=o=>e.emailuser=o),type:"email",name:"emailuser",class:"emailuser",placeholder:"Insira seu e-mail"},null,512),[[i,e.emailuser]]),t(r("input",{required:"","onUpdate:modelValue":s[1]||(s[1]=o=>e.passworduser=o),type:"password",name:"passworduser",class:"passworduser",placeholder:"Insira sua senha"},null,512),[[i,e.passworduser]]),j],40,N),m.value?(l(),d("p",B,g(m.value),1)):h("",!0),r("p",{class:"forms__ask"},[k(" Não possui uma conta? Crie uma "),r("button",{onClick:w},"Clicando aqui")])]))]))}},Q=q(K,[["__scopeId","data-v-56ee54a9"]]),X={__name:"LoginRegister",setup(u){return(v,n)=>(l(),U(Q))}};export{X as default};
